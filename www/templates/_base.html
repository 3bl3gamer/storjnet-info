{{define "base" -}}
<!DOCTYPE html>
<html lang={{.L.Lang}}>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>{{block "title" .}}Storj3 stat{{end}}</title>
		<link href="/css/main.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div class="header">
			<a class="logo" href="/">
				<div class="logo-main">Storj Net Info</div>
				<div class="logo-sub">{{.L.Loc "Network v3 stats" "ru" "Статистика сети v3"}}</div>
			</a>
			<form class="nodes-search" method="GET" action="/search">
				<input type="text" name="q" placeholder='{{.L.Loc "Search nodes by ID" "ru" "Поиск нод по ID"}}'>
				<button type="submit">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
						<path
							d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
					</svg>
				</button>
			</form>
			<form class="lang-switch" method="POST" action="/lang">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
					<path
						d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm-.67,20.17a9.68,9.68,0,0,1-5.67-2.72A9.37,9.37,0,0,1,5.14,5.58a9.22,9.22,0,0,1,.11,1.29C5.16,8.14,5,8.93,5.79,10a5.15,5.15,0,0,1,.51,1.49c.14.48.7.72,1.08,1,.78.59,1.53,1.27,2.35,1.79.55.34.89.51.73,1.16A4.28,4.28,0,0,1,10,16.77,2.5,2.5,0,0,0,10.47,18a16.63,16.63,0,0,0,1.25,1.12C12.41,19.64,11.65,20.37,11.33,21.17Zm7.42-2.56A9.26,9.26,0,0,1,14,21.17a3.74,3.74,0,0,1,1.13-1.53,3.92,3.92,0,0,0,1-1.27,8.19,8.19,0,0,1,.7-1.22c.37-.56-.9-1.42-1.31-1.6A13.48,13.48,0,0,1,13.06,14c-.59-.42-1.77.21-2.43-.08a12.61,12.61,0,0,1-2.44-1.68c-.81-.62-.77-1.34-.77-2.24.63,0,1.54-.18,2,.33.13.17.59.89.9.63S10.09,9.93,10,9.73c-.26-.61.59-.85,1-1.26s1.79-1.39,1.69-1.78S11.5,5.21,10.84,5.38c-.1,0-1,.94-1.13,1.08,0-.3,0-.6,0-.89s-.35-.39-.33-.51c0-.31.89-.87,1.1-1.11-.15-.1-.65-.54-.81-.47-.37.15-.79.26-1.16.42a2.22,2.22,0,0,0,0-.37,8.74,8.74,0,0,1,2.34-.69l.73.29.52.62.51.53.45.15.71-.68-.18-.48V2.83a9.13,9.13,0,0,1,3.91,1.56l-.7.08a3.84,3.84,0,0,0-.36-.14c.34.74.69,1.46,1,2.18s1.23,1.6,1.38,2.42,0,1.83.15,3a5,5,0,0,0,1.22,2.32,2.39,2.39,0,0,0,1,.12A9.36,9.36,0,0,1,18.75,18.61Z">
					</path>
				</svg>
				<select name="lang" onchange="this.form.submit()" autocomplete="off">
					<option value="en" {{if .L.Is "en"}}selected{{end}}>EN</option>
					<option value="ru" {{if .L.Is "ru"}}selected{{end}}>RU</option>
				</select>
				<noscript>
					<input type="submit" value="OK">
				</noscript>
			</form>
		</div>
		<div class="content">
			<p class="warn">
				{{if .L.Is "ru"}}
				В версии 0.22.0 ноды перстали общаться между собой, и отслеживать их появлене теперь нет возможности.
				Так что общая статисника больше обновляться не сможет, и с 2019-10-05 20:00 UTC <b>storjnet.info замораживается</b>.
				Возможно, скоро тут появится что-то новое. А пока можно посмотреть <a href="/?days=125">историю за все 125 дней</a>.
				{{else}}
				Since v0.22.0 nodes stopped communicating with each other and there are no more ways to watch for new nodes.
				So overall stats can no longer be updated and from 2019-10-05 20:00 UTC <b>storjnet.info is frozen</b>.
				Maybe something new will come up here soon. In the meantime, you can check <a href="/?days=125">the full 125 days history</a>.
				{{end}}
			</p>
			{{block "content" .}}...{{end}}
		</div>
		<div class="footer">
			{{if .L.Is "ru"}}
			По багам, фичам и вообще писать можно в
			{{else}}
			You can report bugs and suggest features via
			{{end}}
			<a href="https://github.com/3bl3gamer/storjnet-info">GitHub</a>,
			<a href="tg://zblzgamer">tg://zblzgamer</a> {{.L.Loc "or" "ru" "или на"}}
			<a href="mailto:zblzgamer@yandex.ru">zblzgamer@yandex.ru</a>,
			{{if .L.Is "ru"}}
			задонатить на вкусняшку можно через
			{{else}}
			donate on some yummies via
			{{end}}
			<a href="https://money.yandex.ru/to/410013340187763">{{.L.Loc "Yandex.Money" "ru" "Яндекс.Деньги"}}</a>.
		</div>
		<script>
			(function () {
				let lang = document.documentElement.lang
				let dateFmt = new Intl.DateTimeFormat(lang, { year: 'numeric', month: '2-digit', day: '2-digit' })
				let timeFmt = new Intl.DateTimeFormat(undefined, { hour: '2-digit', minute: '2-digit', hour12: false })
				let sep = lang == 'ru' ? ' в ' : ' at '
				Array.from(document.getElementsByTagName('time')).forEach(elem => {
					let d = new Date(elem.dateTime)
					elem.textContent = dateFmt.format(d) + sep + timeFmt.format(d)
				})
			})()
		</script>
		{{block "js_payload" .}}{{end}}
		<script type="module" src="/js/main.js"></script>
		{{block "extra_scripts" .}}{{end}}
		{{block "local_html_content" .}}{{end}}
	</body>
</html>
{{ end }}

{{define "feature_disabled"}}
<p class="warn">
	{{if .L.Is "ru"}}
	С версии v0.17.0 ноды <a href="https://github.com/storj/storj/releases/tag/v0.17.0">перестали</a>
	отдавать информацию о себе недоверенным сателлитам, поэтому статистику
	по версиям, объёмам и типам нод обновлять больше не получится.
	{{else}}
	Since version v0.17.0 nodes <a href="https://github.com/storj/storj/releases/tag/v0.17.0">have restriced</a>
	information access to untrusted satellites,
	therefore, statistics on versions, volumes and node types can no longer be updated.
	{{end}}
</p>
{{end}}